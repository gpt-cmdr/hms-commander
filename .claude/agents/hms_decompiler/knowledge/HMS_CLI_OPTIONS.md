# HEC-HMS Command Line Interface Options

## Overview

This document details the CLI options discovered through decompilation of HEC-HMS.
These options apply to HMS 4.x versions (tested with 4.13).

## Discovered CLI Arguments

From decompilation of `hms.Hms.main()`:

### Script Execution
| Argument | Description |
|----------|-------------|
| `-s <script>` | Execute a Jython script file |
| `-script <script>` | Execute a Jython script file (same as -s) |

### Debug Options
| Argument | Description |
|----------|-------------|
| `-d` | Enable debug mode |
| `-debug` | Enable debug mode (same as -d) |

### Display Options
| Argument | Description |
|----------|-------------|
| `-l` | Lite mode (headless/scripting mode, no GUI) |
| `-lite` | Lite mode (same as -l) |
| `-disableprint` | Disable print output |

### Information
| Argument | Description |
|----------|-------------|
| `-info` | Print version, build number, and date, then exit |

### Command Server Mode (RMI)
| Argument | Description |
|----------|-------------|
| `CommandServer` | Start as RMI command server |
| `port=<number>` | Specify port for command server |

## Example Usage

```bash
# Run a Jython script
HEC-HMS.cmd -script path/to/script.py

# Run in debug mode with script
HEC-HMS.cmd -debug -script path/to/script.py

# Get version info
HEC-HMS.cmd -info

# Start command server on specific port
HEC-HMS.cmd CommandServer port=1099

# Run in lite (headless) mode
HEC-HMS.cmd -lite
```

## Code Analysis

From `hms/Hms.java` lines 261-356:

```java
public static void main(String[] stringArray) {
    boolean bl2 = false;    // lite mode flag
    boolean bl3 = true;     // print enabled flag
    boolean bl4 = false;    // debug flag
    String string = null;   // script path
    int n2 = 0;             // port number
    boolean bl5 = false;    // command server flag

    for (int i2 = 0; i2 < stringArray.length; ++i2) {
        if (stringArray[i2].compareTo("-d") == 0 ||
            stringArray[i2].compareTo("-debug") == 0) {
            bl4 = true;  // Enable debug
        }
        else if (stringArray[i2].compareTo("-l") == 0 ||
                 stringArray[i2].compareTo("-lite") == 0) {
            bl2 = true;  // Enable lite mode
        }
        else if (stringArray[i2].compareTo("CommandServer") == 0) {
            bl5 = true;  // Enable command server
        }
        else if (stringArray[i2].startsWith("port=")) {
            n2 = Integer.parseInt(stringArray[i2].substring(5).trim());
        }
        else if (stringArray[i2].compareTo("-s") == 0 ||
                 stringArray[i2].compareTo("-script") == 0) {
            string = stringArray[++i2];  // Get script path
        }
        else if (stringArray[i2].compareTo("-disableprint") == 0) {
            bl3 = false;  // Disable print
        }
        else if (stringArray[i2].compareTo("-info") == 0) {
            // Print version info and exit
            System.out.println("Version: " + version + " Build: " + build + " Date: " + date);
            return;
        }
    }
}
```

## Script Execution Flow

When `-script` is provided:
1. Initialize `w_0` and `s_0` subsystems
2. If debug enabled, call `h.a(true)`
3. Print start banner with version info
4. Call `JythonHms.runScript(scriptPath)`
5. Print end banner with exit status
6. `System.exit(exitCode)`

## Command Server Mode

The `CommandServer` mode starts an RMI server (`HmsCommandServerImpl`) that can accept remote commands.
This is interesting for potential headless automation without Jython scripts.

## Key Classes for Further Analysis

- `hms.model.JythonHms` - Jython script execution
- `hms.command.HmsCommandServerImpl` - RMI command server
- `hms.model.ProjectManager` - Project management
- `hms.a_0` - Version/build info

## Version Compatibility Notes

| Version | Notes |
|---------|-------|
| 4.13 | Fully decompiled and tested |
| 4.4.1+ | Expected to have same CLI options |
| 4.0-4.3 | May have different structure |
| 3.x | No Jython support |

---
*Generated by hms-commander decompilation analysis*
*Last updated: 2025-12-10*
